# Bank4 상세 컨텍스트

## 1. 프로젝트 배경
- 수학 학원에서 v3 문제은행을 자체 개발·운영 중 (20만건+ 문제 DB)
- v4는 BE는 거의 그대로 유지, **FE를 백지에서 새로 개발**
- 런칭 목표는 급하지 않음. **완성도 > 속도**
- 담당자: **본부장님** (비개발자, FE/BE 전반 의사결정)

## 2. v3 메뉴 구조 (전부 유지, 제거 없음)
- 시험출제: 목록 / 일일테스트 / 빠른테스트 / 제로·브릿지 / 진단평가 / 학교별기출
- 성적처리, 클리닉, 오답시험 만들기, 개념나래

## 3. v4 신규 추가
- 대시보드, 콘텐츠 관리(문제등록+AI OCR), AI 센터, 통계/분석

## 4. 사용자 역할
- **강사**: 시험 출제 (빠른테스트 다빈도, 학교별 기출 활용)
- **조교**: 채점/성적처리
- **교재팀**: 콘텐츠 등록, OCR(시험지 스캔→낙서제거→LaTeX변환→업로드)

## 5. 비즈니스 전략
- **점진적 오픈**: 1차="학교별 기출"+"오답시험" → 강사 피드백 → 2차 확장
- 1차: 학교별 기출 + 오답시험 만들기
- 2차: 시험출제 전체 + 성적처리
- 3차: 클리닉 + 개념나래 + OCR + AI + 통계

## 6. v3 주요 페인포인트
- 수식 출력 시 행간 깨짐, 분수로 인한 레이아웃 틀어짐, 폰트 품질 미흡
- OCR 파이프라인이 수동적
- UI/UX 낙음, 검색 비효율적, 시험지 제작 번거로움

## 7. 기술 결정사항
- 수식 렌더링: 화면=KaTeX(빠름), 인쇄/PDF=서버 XeLaTeX(교재급 품질)
- 폰트: Pretendard(UI 산세리프) + KoPubBatang(문제 본문 명조) + KaTeX 기본(수식)
- 디자인: 클린 미니멀 + Indigo/Blue + 접기식 사이드바
- 라이트모드 기본, 다크모드 토글 선택
- DB: MySQL(기존서버, 태깅컨럼추가예정) + Vector DB(신규, AI유사문제검색)
- 배포: Vercel
- 상태관리: 미정 (Zustand 유력)
- TeamPro와 차별화: TeamPro는 Emerald/Green + Inter+Noto Sans KR. Bank4는 Indigo/Blue + Pretendard

## 8. 개발 로드맵
- Phase 0 (현재): 설계 & HTML 목업 → 디자인 승인
- Phase 1: React+TS+Vite+Tailwind 셋업, 공통 컴포넌트, 수식 렌더링 기반
- Phase 2: 학교별 기출 + 오답시험 (1차 오픈)
- Phase 3: 시험출제 전체 + 성적처리
- Phase 4: 클리닉 + 개념나래 + OCR
- Phase 5: AI 기능 + 통계

## 9. 현재 파일 구조
- `index.html` — 목업 목록 페이지 (Vercel 인덱스)
- `dev-docs.html` — 개발문서 5탭 (계획서/화면구조도/데이터맵/DB설계/체크리스트)
- `mockup-school-exam.html` — 학교별 기출 (공통 레이아웃 기준 파일)
- `mockup-wrong-answer.html` — 오답시험 만들기 (3단계 워크플로우)
- `mockup-exam-preview.html` — 시험지 미리보기/인쇄
- `vercel.json` — 정적 파일 서빙 설정 (빌드 비활성화)
- `test-latex-quality.html` — 수식 출력 품질 테스트 페이지 (KaTeX 렌더링 + 인쇄 검증)

## 10. 남은 목업 (제작 예정)
- 대시보드, 시험출제, 성적처리, 클리닉, 개념나래
- 콘텐츠 관리, AI 센터, 통계/분석, 설정

## 11. 사용자 명시 제약조건
- "일단 코딩 없이 html만으로 모든 화면단을 작업. 본부장님 화면 디자인 승인되면 그때 코딩"
- "제거할 기능은 없으며" (v3 전체 기능 유지)
- "런칭 목표는 급하지 않음. 완성도 있어야 됨"
- "BE는 나중에 필요한 단계에서 제공" (API는 추후 공유)
- "학교별기출 + 오답시험 먼저 구현, 강사 피드백 후 판단"

## 12. API 연결 및 데이터 마이그레이션 계획

### FE↔BE 연결 전략
- FE 전체 화면을 목데이터로 먼저 개발 → 완성 후 API 명세 한번에 정리 → BE에게 전달
- BE 개발자 있음 (우리 부서 소속)

### v3 데이터 현황
- 문항 데이터 형식: **HTML + LaTeX** (혼합)
- 난이도 분류: 있음, 단 재분류 필요
- 벡터 임베딩: 없음 (신규 작업 필요)

### 데이터 정규화 계획 (20만건+)
- 기존 LaTeX가 있으므로 "통일/정규화" 수준 (처음부터 변환이 아님)
- 정규화 규칙: 본부장님 + AI가 협업으로 정의 → BE가 DB에 적용
- 품질 보증: 자동변환 + 자동검증(KaTeX 렌더링 테스트) + 샘플링 검수 + 오류신고 기능
- 목표: 95%+ 자동 변환 성공, 나머지는 발견 시 수정

### 출력 품질 사전 검증 (현재 진행 중)
- 교재팀에 v3에서 출력 문제 있었던 문항 15~20개 요청
- 필요한 것: 문항 ID 목록(교재팀) + DB 원본 데이터 추출(BE) + 현재 출력물(교재팀)
- `test-latex-quality.html`에 실제 문항 반영 → 화면+인쇄 품질 비교 예정
- 시험지 인쇄 레이아웃: **A4 2단** (좌우 나눔)

### 예상 소요 시간 (전체 20만건 기준)
- LaTeX 정규화: 규칙개발 1~2주 + 처리 수시간 + 검수 1~2주
- 난이도 태깅: 개발 3~5일 + 처리 2~4일 + 검수 1주
- 벡터화: 개발 2~3일 + 처리 수시간 + 검수 2~3일
- 병렬 진행 시 전체 약 4~6주
- 비용: 저렴한 모델 조합 시 50~100만원 수준